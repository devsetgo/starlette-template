{% extends "base.html" %}
{% block page_title %}| Dashboard{% endblock %}
{% block page_stylesheet %}
<link rel="stylesheet"
  href="{{ url_for('static' , path='plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css') }}">
<!-- iCheck -->
<link rel="stylesheet" href="{{ url_for('static' , path='plugins/icheck-bootstrap/icheck-bootstrap.min.css') }}">
<!-- JQVMap -->
<link rel="stylesheet" href="{{ url_for('static' , path='plugins/jqvmap/jqvmap.min.css') }}">
<!-- overlayScrollbars -->
<link rel="stylesheet" href="{{ url_for('static' , path='plugins/overlayScrollbars/css/OverlayScrollbars.min.css') }}">
<!-- Daterange picker -->
<link rel="stylesheet" href="{{ url_for('static' , path='plugins/daterangepicker/daterangepicker.css') }}">
<!-- summernote -->
<link rel="stylesheet" href="{{ url_for('static' , path='plugins/summernote/summernote-bs4.css') }}">


{% endblock %}
{% block page_breadcrumb %} Dashboard{% endblock %}
{% block page_head_title %}Dashboard{% endblock %}
{% block body %}
{% block page_scripts %}
<!-- page scripts-->
<!-- OPTIONAL SCRIPTS -->
<script src="{{ url_for('static' , path='plugins/chart.js/Chart.min.js') }}"></script>
<script src="{{ url_for('static' , path='dist/js/demo.js') }}"></script>
<script src="{{ url_for('static' , path='dist/js/pages/dashboard3.js') }}"></script>

<script>
  $(function () {
    /* ChartJS
     * -------
     * Here we will create a few charts using ChartJS
     */

    //--------------
    //- AREA CHART -
    //--------------

    // Get context with jQuery - using jQuery's .get() method.
    var areaChartCanvas = $('#areaChart').get(0).getContext('2d')

    var areaChartData = {
      labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', "Aug", "Sep", "Oct", "Nov", "Dec"],
      datasets: [

      {% for m in metrics.post_per_month%}
      {
        label: {{m['year']}},
        backgroundColor: '{{m['backgroundColor']}}',
        borderColor: '{{m['borderColor']}}',
        pointRadius: false,
        pointColor: '#3b8bba',
        pointStrokeColor: '{{m['pointStrokeColor']}}',
        pointHighlightFill: '#fff',
        pointHighlightStroke: '{{m['pointHighlightStroke']}}',
        data: {{m['data']}}
      },
      {% endfor %}
      ]
    }

    var areaChartOptions = {
      maintainAspectRatio: false,
      responsive: true,
      legend: {
        display: true
      },
      scales: {
        xAxes: [{
          gridLines: {
            display: true,
          }
        }],
        yAxes: [{
          gridLines: {
            display: true,
          }
        }]
      }
    }

    // This will get the first returned node in the jQuery collection.
    var areaChart = new Chart(areaChartCanvas, {
      type: 'line',
      data: areaChartData,
      options: areaChartOptions
    })

    //-------------
    //- LINE CHART -
    //--------------
    var lineChartCanvas = $('#lineChart').get(0).getContext('2d')
    var lineChartOptions = jQuery.extend(true, {}, areaChartOptions)
    var lineChartData = jQuery.extend(true, {}, areaChartData)
    lineChartData.datasets[0].fill = false;
    lineChartData.datasets[1].fill = false;
    lineChartOptions.datasetFill = false

    var lineChart = new Chart(lineChartCanvas, {
      type: 'line',
      data: lineChartData,
      options: lineChartOptions
    })

    //-------------
    //- DONUT CHART -
    //-------------
    // Get context with jQuery - using jQuery's .get() method.
    var donutChartCanvas = $('#donutChart').get(0).getContext('2d')
    var donutData = {
      labels: {{ metrics.post_per_year.years| safe
  }},
    datasets: [
      {
        data: {{ metrics.post_per_year.data | safe }},
      backgroundColor: {{ metrics.hex[: metrics.post_per_year.qty] | safe }},
        }
      ]
    }
    var donutOptions = {
    maintainAspectRatio: false,
    responsive: true,
  }
  //Create pie or douhnut chart
  // You can switch between pie and douhnut using the method below.
  var donutChart = new Chart(donutChartCanvas, {
    type: 'doughnut',
    data: donutData,
    options: donutOptions
  })

  //-------------
  //- PIE CHART -
  //-------------
  // Get context with jQuery - using jQuery's .get() method.
  var pieChartCanvas = $('#pieChart').get(0).getContext('2d')
  var pieData = {
    labels: {{ metrics.post_per_year.years| safe }},
  datasets: [
    {
      data: {{ metrics.post_per_year.data | safe }},
    backgroundColor: {{ metrics.hex[: metrics.post_per_year.qty] | safe }},
        }
      ]
    }
  var pieOptions = {
    maintainAspectRatio: false,
    responsive: true,
  }
  //Create pie or douhnut chart
  // You can switch between pie and douhnut using the method below.
  var pieChart = new Chart(pieChartCanvas, {
    type: 'pie',
    data: pieData,
    options: pieOptions
  })

  //-------------
  //- BAR CHART -
  //-------------
  var barChartCanvas = $('#barChart').get(0).getContext('2d')
  var barChartData = jQuery.extend(true, {}, areaChartData)
  var temp0 = areaChartData.datasets[0]
  var temp1 = areaChartData.datasets[1]
  barChartData.datasets[0] = temp1
  barChartData.datasets[1] = temp0

  var barChartOptions = {
    responsive: true,
    maintainAspectRatio: false,
    datasetFill: false
  }

  var barChart = new Chart(barChartCanvas, {
    type: 'bar',
    data: barChartData,
    options: barChartOptions
  })

  //---------------------
  //- STACKED BAR CHART -
  //---------------------
  var stackedBarChartCanvas = $('#stackedBarChart').get(0).getContext('2d')
  var stackedBarChartData = jQuery.extend(true, {}, barChartData)

  var stackedBarChartOptions = {
    responsive: true,
    maintainAspectRatio: false,
    scales: {
      xAxes: [{
        stacked: true,
      }],
      yAxes: [{
        stacked: true
      }]
    }
  }

  var stackedBarChart = new Chart(stackedBarChartCanvas, {
    type: 'bar',
    data: stackedBarChartData,
    options: stackedBarChartOptions
  })
  })
</script>
<script>

</script>
{% endblock %}
<!-- Main content -->
<div class="content">
  <div class="container-fluid">
    {% include "dashboard/metrics.html" %}
    {% include "dashboard/posts.html" %}

  </div>
  <!-- <div>

  </div> -->
  <!-- /.container-fluid -->
</div>
<!-- /.content -->
</div>
<!-- /.content-wrapper -->

{% endblock %}


{% block page_sidebar_content %}
<!-- blank and demo script adds page configuration example -->

{% endblock %}
